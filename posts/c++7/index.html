<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
<script>
  
  
  (function() {
    const theme = localStorage.getItem('theme');
    if (theme === 'dark') {
      document.documentElement.setAttribute('data-theme', 'dark');
    } else if (theme === 'light') {
      document.documentElement.setAttribute('data-theme', 'light');
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
  })();
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>面向对象的程序设计学习笔记 7 | Kibrac&#39;s Blog</title>
<link rel="icon" type="image/png" href="/images/favicon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&family=Montserrat:wght@400;700&family=JetBrains+Mono&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="/css/syntax.css">
<link rel="stylesheet" href="/css/style.css">

</head>
<body class="kind-page section-posts">
    <div id="content">
        <header class="site-header">
    <div class="container">
        <h1><a href="https://kibrac.github.io/">Kibrac&#39;s Blog</a></h1>
        <nav class="site-nav">
            <ul>
                
                
                    
                    
                    
                    <li class="">
                        <a href="/">Home</a>
                    </li>
                
                    
                    
                    
                    <li class="active">
                        <a href="/posts/">Posts</a>
                    </li>
                
                    
                    
                    
                    <li class="">
                        <a href="/archive/">Archive</a>
                    </li>
                
                    
                    
                    
                    <li class="">
                        <a href="/tags/">Tags</a>
                    </li>
                
            </ul>
            <button id="theme-toggle" title="切换暗黑模式"></button>
        </nav>
    </div>
</header>
        <main class="main-content">
            
<article class="post-single">
    <header class="page-header">
        <h1>面向对象的程序设计学习笔记 7</h1>
        
            <p class="page-content">第七章 输入输出和模板</p>
        
        <div class="post-meta">
            <span>August 15, 2025</span>
            <span class="dot">&middot;</span>
            <span>10 min read</span>
            
                <span class="dot">&middot;</span>
                <div class="tags-inline">
                    
                        <a href="/tags/c&#43;&#43;">C&#43;&#43;</a>
                    
                        <a href="/tags/%E7%AC%94%E8%AE%B0">笔记</a>
                    
                </div>
            
        </div>
    </header>

    <div class="post-content">
        <h2 id="1输入输出流相关的类">1.输入输出流相关的类</h2>
<h3 id="与输入输出流操作相关的类">与输入输出流操作相关的类</h3>
<p><img src="https://raw.githubusercontent.com/kibrac/img_vault/main/Obsidian_img/20250516104354869.png" alt="image.png"></p>
<ul>
<li>istream 是用于输入的流类，cin 就是该类的对象。</li>
<li>ostream 是用于输出的流类，cout 就是该类的对象。</li>
<li>ifstream 是用于从文件读取数据的类。</li>
<li>ofstream 是用于向文件写入数据的类。</li>
<li>iostream 是既能用于输入，又能用于输出的类。</li>
<li>fstream 是既能从文件读取数据，又能向文件写入数据的类。</li>
</ul>
<h3 id="标准流对象">标准流对象</h3>
<ul>
<li>输入流对象：cin 与标准输入设备相连</li>
<li>输出流对象：cout 与标准输出设备相连 cerr 与标准错误输出设备相连 clog 与标准错误输出设备相连</li>
</ul>
<p>缺省情况下</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Hello, world&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">clog</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Hello, world&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>和 <code>cout &lt;&lt; &quot;Hello, world&quot; &lt;&lt; endl;</code> 一样。</p>
<ul>
<li>cin 对应于标准输入流，用于从键盘读取数据，也可以被<strong>重定向</strong>为从文件中读取数据。</li>
<li>cout 对应于标准输出流，用于向屏幕输出数据，也可以被<strong>重定向</strong>为向文件写入数据</li>
<li>cerr 对应于标准错误输出流，用于向屏幕输出出错信息</li>
<li>clog 对应于标准错误输出流，用于向屏幕输出出错信息</li>
<li>cerr 和 clog 的区别在于 cerr 不使用缓冲区，直接向显示器输出信息；而输出到 clog 中的信息先会被存放在缓冲区，缓冲区满或者刷新时才输出到屏幕</li>
</ul>
<h3 id="输出和输入的重定向">输出和输入的重定向</h3>
<p><strong>输出重定向</strong></p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">freopen</span><span class="p">(</span><span class="s">&#34;test.txt&#34;</span><span class="p">,</span><span class="s">&#34;w&#34;</span><span class="p">,</span><span class="n">stdout</span><span class="p">);</span><span class="c1">//将标准输出重定向到test.txt文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span><span class="p">(</span><span class="n">y</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="c1">//除数为0则在屏幕上输出错误信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;error&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span><span class="c1">//cerr并没有被重定向
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span><span class="p">;</span><span class="c1">//输出结果到test.txt
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p><strong>输入重定向</strong></p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">f</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">freopen</span><span class="p">(</span><span class="s">&#34;t.txt&#34;</span><span class="p">,</span><span class="s">&#34;r&#34;</span><span class="p">,</span><span class="n">stdin</span><span class="p">);</span><span class="c1">//cin被改为从t.txt中读取数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">f</span> <span class="o">&gt;&gt;</span> <span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">f</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>对于以上程序有</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">t.txt
</span></span><span class="line"><span class="cl">3.14 123
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">输出
</span></span><span class="line"><span class="cl">3.14,123</span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="判断输入流结束">判断输入流结束</h3>
<ul>
<li>如果是从文件输入，比如前面有 <code>freopen(&quot;some.txt&quot;,&quot;r&quot;,stdin);</code> 那么读到文件尾部，输入流就算结束</li>
<li>如果从键盘输入，则在单独一行输入 <code>Ctrl</code>+<code>Z</code> 代表输入流结束</li>
</ul>
<h3 id="istream-类的成员函数">istream 类的成员函数</h3>
<p><code>istream&amp; getline(char* buf,int bufSize);</code></p>
<p>从输入流中读取 <code>bufSize-1</code> 个字符到缓冲区 <code>buf</code>，或一直读取直到碰到 <code>\n</code> 为止（哪个先到算哪个）。</p>
<p><code>istream&amp; getline(char* buf,int bufSize,char delim);</code></p>
<p>从输入流中读取 <code>bufSize-1</code> 个字符到缓冲区 <code>buf</code>，或一直读取直到碰到 <code>delim</code> 字符为止（哪个先到算哪个）。</p>
<p><strong>上面两个函数都自动在 <code>buf</code> 中读入的数据的结尾添加 <code>\0</code>。<code>\n</code> 或 <code>delim</code> 都不会被读入 <code>buf</code>，但会被从输入流中取走。</strong> 如果输入流中 <code>\n</code> 或 <code>delim</code> 之前的字符个数<strong>达到或超过</strong> <code>bufSize</code> 个，就导致读入出错，其结果是虽然本次读入已经完成，但是之后的读入都会失败。</p>
<p>可以用 <code>if(!cin.getline(…))</code> 判断输入是否结束。</p>
<p><code>bool eof();</code> 判断输入流是否结束</p>
<p><code>int peek();</code> 返回下一个字符，但不从流中去掉</p>
<p><code>istream&amp; putback(char c);</code> 将字符放回输入流（头部）</p>
<p><code>istream&amp; ignore(int nCount=1,int delim=EOF);</code> 从流中删掉最多 nCount 个字符，遇到 EOF 时结束</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cin</span><span class="p">.</span><span class="n">getline</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="mi">90</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">buf</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>对于以上程序有</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Input
</span></span><span class="line"><span class="cl">12 abcd↓
</span></span><span class="line"><span class="cl">Output
</span></span><span class="line"><span class="cl"> abcd
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Input
</span></span><span class="line"><span class="cl">12↓
</span></span><span class="line"><span class="cl">程序立即结束，输出空行</span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>这是因为 <code>getline</code> 读到留在流中的 <code>\n</code> 就会返回。</p>
<h2 id="2流操纵算子">2.流操纵算子</h2>
<p><strong>使用流操纵算子需要 <code>#include &lt;iomanip&gt;</code></strong></p>
<h3 id="整数流的基数流操纵算子-decocthexsetbase">整数流的基数：流操纵算子 <code>dec</code>，<code>oct</code>，<code>hex</code>，<code>setbase</code></h3>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iomanip&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">hex</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="c1">//十六进制
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		 <span class="o">&lt;&lt;</span> <span class="n">dec</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="c1">//十进制
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		 <span class="o">&lt;&lt;</span> <span class="n">oct</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span><span class="c1">//八进制
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>输出结果</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">10
</span></span><span class="line"><span class="cl">a
</span></span><span class="line"><span class="cl">10
</span></span><span class="line"><span class="cl">12</span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="浮点数的精度-precisionsetprecision">浮点数的精度 <code>precision</code>，<code>setprecision</code></h3>
<ul>
<li><code>precision</code> 是成员函数，其调用方式为：<code>cout.precision(5);</code></li>
<li><code>setprecision</code> 是流操纵算子，其调用方式为：<code>cout &lt;&lt; setprecision(5);//可以连续输出</code></li>
</ul>
<p>上述两者的功能相同：<strong>指定输出浮点数的有效位数（非定点方式输出时），指定输出浮点数的小数点后的有效位数（定点方式输出时）。</strong></p>
<p><strong>定点方式</strong>指的是小数点必须出现在个位数后面。（像科学计数法中小数点就并不是出现在个位数后面，属于非定点方式）</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iomanip&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">x</span><span class="o">=</span><span class="mf">1234567.89</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">12.34567</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="mi">1234567</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">m</span><span class="o">=</span><span class="mi">12</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">setprecision</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
</span></span><span class="line"><span class="cl">		 <span class="o">&lt;&lt;</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>输出内容</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.23457e+006
</span></span><span class="line"><span class="cl">12.3457
</span></span><span class="line"><span class="cl">1234567
</span></span><span class="line"><span class="cl">12</span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>如果想要指定小数点后面指定位数</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iomanip&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">x</span><span class="o">=</span><span class="mf">1234567.89</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">12.34567</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="mi">1234567</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">m</span><span class="o">=</span><span class="mi">12</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">setiosflags</span><span class="p">(</span><span class="n">ios</span><span class="o">::</span><span class="n">fixed</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="o">&lt;&lt;</span> <span class="n">setprecision</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
</span></span><span class="line"><span class="cl">		 <span class="o">&lt;&lt;</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">;</span>	
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>输出内容</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1234567.890000
</span></span><span class="line"><span class="cl">12.345670
</span></span><span class="line"><span class="cl">1234567
</span></span><span class="line"><span class="cl">12</span></span></code></pre></td></tr></table>
</div>
</div>
</div><p><code>setiosflags(ios::fixed)</code> 是以小数点位置固定的方式进行输出</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iomanip&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">x</span><span class="o">=</span><span class="mf">1234567.89</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">setiosflags</span><span class="p">(</span><span class="n">ios</span><span class="o">::</span><span class="n">fixed</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="o">&lt;&lt;</span> <span class="n">setprecision</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
</span></span><span class="line"><span class="cl">		 <span class="o">&lt;&lt;</span> <span class="n">resetiosflags</span><span class="p">(</span><span class="n">ios</span><span class="o">::</span><span class="n">fixed</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">x</span><span class="p">;</span>	
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>输出内容为</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1234567.890000
</span></span><span class="line"><span class="cl">1.23457e+006</span></span></code></pre></td></tr></table>
</div>
</div>
</div><p><code>resetiosflags(ios::fixed)</code> 是取消以小数点位置固定的方式输出</p>
<h3 id="设置域宽-setwwidth">设置域宽 <code>setw</code>，<code>width</code></h3>
<p>两者功能相同，一个是成员函数，另一个是流操纵算子，调用方式不同</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">cin</span><span class="p">.</span><span class="n">width</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span><span class="c1">//4和5的区别在于结尾的\0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">cout</span><span class="p">.</span><span class="n">width</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p><strong>宽度设置有效性是一次性的，在每次读入和输出之前都要设置宽度。</strong></p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iomanip&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">w</span><span class="o">=</span><span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">char</span> <span class="n">string</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="n">cin</span><span class="p">.</span><span class="n">width</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span><span class="c1">//这里的宽度5包括了结尾的\0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">while</span><span class="p">(</span><span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">string</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span><span class="p">.</span><span class="n">width</span><span class="p">(</span><span class="n">w</span><span class="o">++</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">string</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">cin</span><span class="p">.</span><span class="n">width</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>对以上程序有</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">输入
</span></span><span class="line"><span class="cl">1234567890
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">输出
</span></span><span class="line"><span class="cl">1234
</span></span><span class="line"><span class="cl"> 5678
</span></span><span class="line"><span class="cl">    90</span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>一个综合例子</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iomanip&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="mi">141</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//1)分别以十六进制、十进制、八进制先后输出n
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;1)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">hex</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span>
</span></span><span class="line"><span class="cl">		 <span class="o">&lt;&lt;</span> <span class="n">dec</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span>
</span></span><span class="line"><span class="cl">		 <span class="o">&lt;&lt;</span> <span class="n">oct</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">x</span><span class="o">=</span><span class="mf">1234567.89</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">12.34567</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//2)保留5位有效数字
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;2)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">setprecision</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//3)保留小数点后面5位
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;3)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">fixed</span> <span class="o">&lt;&lt;</span> <span class="n">setprecision</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//4)科学计数法输出，且保留小数点后面5位
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;4)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">scientific</span> <span class="o">&lt;&lt;</span> <span class="n">setprecision</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">	<span class="c1">//5)非负数要显示正号，输出宽度为12字符，宽度不足则用&#34;*&#34;填补
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;5)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">showpos</span> <span class="o">&lt;&lt;</span> <span class="n">fixed</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">setfill</span><span class="p">(</span><span class="sc">&#39;*&#39;</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mf">12.1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//6)非负数不显示正号，输出宽度为12字符，宽度不足则右边用填充字符填充
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;6)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">noshowpos</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">left</span> <span class="o">&lt;&lt;</span> <span class="mf">12.1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//7)输出宽度为12字符，宽度不足则左边用填充字符填充
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;7)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">right</span> <span class="o">&lt;&lt;</span> <span class="mf">12.1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//8)宽度不足时，负号和数值分列左右，中间用填充字符填充
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;8)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">internal</span> <span class="o">&lt;&lt;</span> <span class="o">-</span><span class="mf">12.1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;9)&#34;</span> <span class="o">&lt;&lt;</span> <span class="mf">12.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>输出内容</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1)8d 141 215
</span></span><span class="line"><span class="cl">2)1.2346e+006 12.346
</span></span><span class="line"><span class="cl">3)1234567.89000 12.34567
</span></span><span class="line"><span class="cl">4)1.23457e+006 1.23457e+001
</span></span><span class="line"><span class="cl">5)***+12.10000
</span></span><span class="line"><span class="cl">6)12.10000****
</span></span><span class="line"><span class="cl">7)****12.10000
</span></span><span class="line"><span class="cl">8)-***12.10000
</span></span><span class="line"><span class="cl">9)12.10000</span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="用户自定义的流操纵算子">用户自定义的流操纵算子</h3>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">tab</span><span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">output</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\t&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;aa&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">tab</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;bb&#34;</span><span class="p">;</span><span class="c1">//输出aa    bb
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>为什么可以这样操作？</p>
<p>因为 <code>iostream</code> 里对 <code>&lt;&lt;</code> 进行了重载（成员函数）<code>ostream&amp; operator&lt;&lt;(ostream&amp;(*p)(ostream&amp;));</code>，该函数内部会调用 <code>p</code> 指向的函数，且以 <code>*this</code> 作为参数。</p>
<p><code>hex</code>、<code>dec</code>、<code>oct</code> 都是函数。</p>
<h2 id="3文件读写">3.文件读写</h2>
<h3 id="文件和流">文件和流</h3>
<p>可以将顺序文件看作一个有限字符构成的顺序字符流，然后对像 <code>cin</code>、<code>cout</code> 一样的读写。</p>
<h3 id="创建文件">创建文件</h3>
<ul>
<li><code>#include &lt;fstream&gt;//首先要包含这个头文件</code></li>
<li><code>ostream outFile(&quot;clients.dat&quot;,ios::out|ios::binary);//创建文件</code>
<ul>
<li>在上面这行代码中</li>
<li><code>clients.dat</code> 是要创建的文件的名字</li>
<li><code>ios::out</code> 是文件打开方式
<ul>
<li><code>ios::out</code> 输出到文件，删除原有内容</li>
<li><code>ios::app</code> 输出到文件，保留原有内容，总是在尾部添加</li>
</ul>
</li>
<li><code>ios::binary</code> 以二进制文件格式打开文件</li>
</ul>
</li>
<li>也可以先创建 <code>ofstream</code> 对象，再用 <code>open</code> 函数打开</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">ofstream</span> <span class="n">fout</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">fout</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#34;test.out&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><ul>
<li>判断打开是否成功</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">fout</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;File open error!&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><ul>
<li>文件名可以给出绝对路径，也可以给相对路径。没有交代路径信息，就是在当前文件夹下找文件。
<ul>
<li>绝对路径
<ul>
<li>&ldquo;c:\\temp\\mydir\\some.txt&rdquo;</li>
</ul>
</li>
<li>相对路径
<ul>
<li>&ldquo;\\temp\\mydir\\some.txt&rdquo;
<ul>
<li>当前盘符的根目录下的 tmp\dir\some.txt</li>
</ul>
</li>
<li>&ldquo;temp\\mydir\\some.txt&rdquo;
<ul>
<li>当前文件夹的 tmp 子文件夹</li>
</ul>
</li>
<li>&ldquo;..\\temp\\mydir\\some.txt&rdquo;
<ul>
<li>当前文件夹的父文件夹下面的 tmp 子文件夹</li>
</ul>
</li>
<li>&ldquo;..\\..\\temp\\mydir\\some.txt&rdquo;
<ul>
<li>当前文件夹的父文件夹的父文件夹下面的 tmp 子文件夹</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="文章的读写指针">文章的读写指针</h3>
<ul>
<li>对于输入文件，有一个读指针</li>
<li>对于输出文件，有一个写指针</li>
<li>对于输入输出文件，有一个读写指针</li>
<li>指针的作用是标识文件操作的当前位置，指针在哪，读写操作就在哪里进行</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">ofstream</span> <span class="nf">fout</span><span class="p">(</span><span class="s">&#34;a1.out&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">app</span><span class="p">);</span><span class="c1">//以添加方式打开
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">long</span> <span class="n">location</span><span class="o">=</span><span class="n">fout</span><span class="p">.</span><span class="n">tellp</span><span class="p">();</span><span class="c1">//取得写指针的位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">location</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">fout</span><span class="p">.</span><span class="n">seekp</span><span class="p">(</span><span class="n">location</span><span class="p">);</span><span class="c1">//将写指针移动到第10个字节处
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">fout</span><span class="p">.</span><span class="n">seekp</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">beg</span><span class="p">);</span><span class="c1">//从头开始数location个字节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">fout</span><span class="p">.</span><span class="n">seekp</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">cur</span><span class="p">);</span><span class="c1">//从当前位置开始数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">fout</span><span class="p">.</span><span class="n">seekp</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">end</span><span class="p">);</span><span class="c1">//从尾部开始数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="n">ifstream</span> <span class="nf">fin</span><span class="p">(</span><span class="s">&#34;a1.in&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">ate</span><span class="p">);</span><span class="c1">//打开文件，定位文件指针到文件尾
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">long</span> <span class="n">location</span><span class="o">=</span><span class="n">fin</span><span class="p">.</span><span class="n">tellg</span><span class="p">();</span><span class="c1">//取得读指针的位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">location</span><span class="o">=</span><span class="mi">10L</span><span class="p">;</span><span class="c1">//这里的后缀L是显式标注，效果是一样的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">fin</span><span class="p">.</span><span class="n">seekg</span><span class="p">(</span><span class="n">location</span><span class="p">);</span><span class="c1">//将读指针移动到第10个字节处
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">fin</span><span class="p">.</span><span class="n">seekg</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">beg</span><span class="p">);</span><span class="c1">//从头开始数location个字节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">fin</span><span class="p">.</span><span class="n">seekg</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">cur</span><span class="p">);</span><span class="c1">//从当前位置开始数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">fin</span><span class="p">.</span><span class="n">seekg</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">end</span><span class="p">);</span><span class="c1">//从尾部开始数
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p><strong>location 可以为负值。</strong></p>
<h3 id="字符文件读写">字符文件读写</h3>
<ul>
<li>因为文件流也是流，所以流的成员函数和流操作算子也同样适用于文件流。</li>
</ul>
<p>考虑以下情景</p>
<ul>
<li>写一个程序，将文件 in.txt 里面的整数排序后，输出到 out.txt。例如，若 in.txt 的内容为：1 234 9 45 6 879，则执行程序后生成的 out.txt 的内容为：1 6 9 45 234 879</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">ifstream</span> <span class="n">srcFile</span><span class="p">(</span><span class="s">&#34;in.txt&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">in</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">ofstream</span> <span class="n">destFile</span><span class="p">(</span><span class="s">&#34;out.txt&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="n">srcFile</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">sort</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">destFile</span> <span class="o">&lt;&lt;</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">destFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">srcFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span><span class="c1">//打开文件之后要记得关闭
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="二进制文件读写">二进制文件读写</h3>
<p><code>ifstream</code> 和 <code>fstream</code> 的成员函数 <code>istream&amp; read(char* s,long n);</code></p>
<p>将文件读指针指向的地方的 n 个字节内容，读入到内存地址 s，然后将文件读指针向后移动 n 字节（以 <code>ios::in</code> 方式打开文件时，文件读指针开始指向文件开头）。</p>
<p><code>ofstream</code> 和 <code>fstream</code> 的成员函数 <code>istream&amp; write(const char* s,long n);</code></p>
<p>将内存地址 s 处的 n 个字节内容，写入到文件中写指针指向的位置，然后将文件写指针向后移动 n 字节（以 <code>ios::out</code> 方式打开文件时，文件写指针开始指向文件开头，以 <code>ios::app</code> 方式打开文件时，文件写指针开始指向文件尾部）。</p>
<p>举例：在文件中写入和读取一个整数</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">ofstream</span> <span class="n">fout</span><span class="p">(</span><span class="s">&#34;some.dat&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">fout</span><span class="p">.</span><span class="n">write</span><span class="p">((</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="n">fout</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">ifstream</span> <span class="n">fin</span><span class="p">(</span><span class="s">&#34;some.dat&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">in</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">fin</span><span class="p">.</span><span class="n">read</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">y</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="n">fin</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>一个更复杂的例子：从键盘输入几个学生的姓名和成绩，并以二进制文件形式保存</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Student</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">score</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">Student</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">ofstream</span> <span class="n">OutFile</span><span class="p">(</span><span class="s">&#34;students.dat&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">name</span> <span class="o">&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">score</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">OutFile</span><span class="p">.</span><span class="n">write</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">s</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="n">OutFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>将 students.dat 文件的内容读出并显示</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Student</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">score</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">Student</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">ifstream</span> <span class="n">inFile</span><span class="p">(</span><span class="s">&#34;students.dat&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">in</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">inFile</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span><span class="s">&#34;error&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="n">inFile</span><span class="p">.</span><span class="n">read</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">s</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">))){</span>
</span></span><span class="line"><span class="cl">		<span class="kt">int</span> <span class="n">readedBytes</span><span class="o">=</span><span class="n">inFile</span><span class="p">.</span><span class="n">gcount</span><span class="p">();</span><span class="c1">//看刚才读了多少字节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">score</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">inFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>如果想要修改其中第三个学生的名字</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Student</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">score</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">Student</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">fstream</span> <span class="n">iofile</span><span class="p">(</span><span class="s">&#34;students.dat&#34;</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">in</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">iofile</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;error&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">iofile</span><span class="p">.</span><span class="n">seekp</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">),</span><span class="n">ios</span><span class="o">::</span><span class="n">beg</span><span class="p">);</span><span class="c1">//定位写指针到第三个记录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">iofile</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#34;Mike&#34;</span><span class="p">,</span><span class="n">strlen</span><span class="p">(</span><span class="s">&#34;Mike&#34;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span><span class="c1">//+1是末尾的/0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">iofile</span><span class="p">.</span><span class="n">seekg</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">beg</span><span class="p">);</span><span class="c1">//定位读指针到开头
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">while</span><span class="p">(</span><span class="n">iofile</span><span class="p">.</span><span class="n">read</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">s</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">score</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">iofile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="文件拷贝程序-mycopy-实例">文件拷贝程序 mycopy 实例</h3>
<p>用法示例：<code>mycopy src.dat dest.dat</code> 即将 src.dat 拷贝到 dest.dat，如果 dest.dat 原来就有，则原来的文件会被覆盖。</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span><span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]){</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//argc是命令行参数，也就是mycopy src.dat dest.dat三个部分
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//argv是文件数，包括读取的文件和写入的文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span><span class="p">(</span><span class="n">argc</span><span class="o">!=</span><span class="mi">3</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;File name missing!&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">ifstream</span> <span class="n">inFile</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">in</span><span class="p">);</span><span class="c1">//打开文件用于读 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">inFile</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Source file open error.&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">ofstream</span> <span class="n">outFile</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="p">);</span><span class="c1">//打开文件用于写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">outFile</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;New file open error.&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">inFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span><span class="c1">//打开的文件一定要关闭 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="n">inFile</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="c1">//每次读取一个字符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">outFile</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="c1">//每次写入一个字符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">outFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">inFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="二进制文件和文本文件的区别">二进制文件和文本文件的区别</h3>
<ul>
<li>Linux,Unix 下的换行符号：<code>\n</code>（ASCII 码:0x0a）</li>
<li>Windows 下的换行符号：<code>\r\n</code>(ASCII 码:0x0d0a)，<code>endl</code> 就是 <code>\n</code></li>
<li>MacOS 下的换行符号：<code>\r</code>（ASCII 码:0x0d）</li>
</ul>
<p>这导致 Linux，MacOS 文本文件在 Windows 记事本中打开时不换行。</p>
<ul>
<li>Unix/Linux 下打开文件，用不用 <code>ios::binary</code> 没区别</li>
<li>Windows 下打开文件，如果不用 <code>ios::binary</code>，则
<ul>
<li>读取文件时，所有的 <code>\r\n</code> 会被当做一个字符 <code>\n</code> 处理，即少读一个字符 <code>\r</code></li>
<li>写入文件时，写入单独的 <code>\n</code>，系统会自动在前面加一个 <code>\r</code>，即多写一个 <code>\r</code></li>
</ul>
</li>
</ul>
<h2 id="4函数模板">4.函数模板</h2>
<h3 id="函数模板">函数模板</h3>
<p>考虑以下情景</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Swap</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">y</span><span class="p">){</span><span class="c1">//交换两个整形变量的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">int</span> <span class="n">tmp</span><span class="o">=</span><span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">x</span><span class="o">=</span><span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">y</span><span class="o">=</span><span class="n">tmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Swap</span><span class="p">(</span><span class="kt">double</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span><span class="kt">double</span><span class="o">&amp;</span> <span class="n">y</span><span class="p">){</span><span class="c1">//交换两个double型变量的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">int</span> <span class="n">tmp</span><span class="o">=</span><span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">x</span><span class="o">=</span><span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">y</span><span class="o">=</span><span class="n">tmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>可以看到上述两个函数的函数体完全一样，能否只写一个 Swap，就能交换各种类型的变量？</p>
<p><strong>用函数模板解决：</strong></p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">类型参数1,</span><span class="nc">class</span> <span class="err">类型参数</span><span class="mi">2</span><span class="p">,......</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">返回值类型</span> <span class="err">模板名</span><span class="p">(</span><span class="err">形参表</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="err">函数体</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Swap</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">y</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">T</span> <span class="n">tmp</span><span class="o">=</span><span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">x</span><span class="o">=</span><span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">y</span><span class="o">=</span><span class="n">tmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">Swap</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">);</span><span class="c1">//编译器自动生成void Swap(int&amp;,int&amp;)函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">double</span> <span class="n">f</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span><span class="n">g</span><span class="o">=</span><span class="mf">2.3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">Swap</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">g</span><span class="p">);</span><span class="c1">//编译器自动生成void Swap(double&amp;,double&amp;)函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p><strong>函数模板中可以有不止一个类型参数。</strong></p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T1</span><span class="p">,</span><span class="k">class</span> <span class="nc">T2</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">T2</span> <span class="n">print</span><span class="p">(</span><span class="n">T1</span> <span class="n">arg1</span><span class="p">,</span><span class="n">T2</span> <span class="n">arg2</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">arg1</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">arg2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">arg2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>举例：求数组最大元素的 MaxElement 函数模板</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span> <span class="n">MaxElement</span><span class="p">(</span><span class="n">T</span> <span class="n">a</span><span class="p">[],</span><span class="kt">int</span> <span class="n">size</span><span class="p">){</span><span class="c1">//size是数组元素个数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">T</span> <span class="n">tmpMax</span><span class="o">=</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span><span class="p">(</span><span class="n">tmpMax</span><span class="o">&lt;</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">tmpMax</span><span class="o">=</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">tmpMax</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p><strong>编译器由模板生成函数的过程称为模板的实例化。</strong></p>
<h3 id="不通过参数实例化函数模板">不通过参数实例化函数模板</h3>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span> <span class="n">Inc</span><span class="p">(</span><span class="n">T</span> <span class="n">n</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">1</span><span class="o">+</span><span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">Inc</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span><span class="c1">//指定double类型，输出2.5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="函数模板的重载">函数模板的重载</h3>
<p>函数模板可以重载，只要它们的<strong>形参表或类型参数表</strong>不同即可。</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T1</span><span class="p">,</span><span class="k">class</span> <span class="nc">T2</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">print</span><span class="p">(</span><span class="n">T1</span> <span class="n">arg1</span><span class="p">,</span><span class="n">T2</span> <span class="n">arg2</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">arg1</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">arg2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">print</span><span class="p">(</span><span class="n">T</span> <span class="n">arg1</span><span class="p">,</span><span class="n">T</span> <span class="n">arg2</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">arg1</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">arg2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="p">,</span><span class="k">class</span> <span class="nc">T2</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">print</span><span class="p">(</span><span class="n">T</span> <span class="n">arg1</span><span class="p">,</span><span class="n">T</span> <span class="n">arg2</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">arg1</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">arg2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="函数模板和函数的次序">函数模板和函数的次序</h3>
<p>在有多个函数和函数模板名字相同的情况下，编译器如下处理一条函数调用语句</p>
<ol>
<li>先找参数完全匹配的<strong>普通函数</strong>（非由模板实例化而得的函数）。</li>
<li>再找参数完全匹配的<strong>模板函数</strong>。</li>
<li>再找实参数经过自动类型转换后能够匹配的<strong>普通函数</strong>。</li>
<li>上面的都找不到则报错。</li>
</ol>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span> <span class="n">Max</span><span class="p">(</span><span class="n">T</span> <span class="n">a</span><span class="p">,</span><span class="n">T</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;TemplateMax&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="p">,</span><span class="k">class</span> <span class="nc">T2</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span> <span class="n">Max</span><span class="p">(</span><span class="n">T</span> <span class="n">a</span><span class="p">,</span><span class="n">T2</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;TemplateMax2&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">double</span> <span class="nf">Max</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span><span class="kt">double</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;MyMax&#34;</span> <span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">Max</span><span class="p">(</span><span class="mf">1.2</span><span class="p">,</span><span class="mf">3.4</span><span class="p">);</span><span class="c1">//输出MyMax
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">Max</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">);</span><span class="c1">//输出TemplateMax
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">Max</span><span class="p">(</span><span class="mf">1.2</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span><span class="c1">//输出TemplateMax2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>匹配模板函数时，不进行类型自动转换</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span> <span class="n">myFunction</span><span class="p">(</span><span class="n">T</span> <span class="n">arg1</span><span class="p">,</span><span class="n">T</span> <span class="n">arg2</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">arg1</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">arg2</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">arg1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">......</span>
</span></span><span class="line"><span class="cl"><span class="n">myFunction</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">);</span><span class="c1">//ok,replace T with int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">myFunction</span><span class="p">(</span><span class="mf">5.8</span><span class="p">,</span><span class="mf">8.4</span><span class="p">);</span><span class="c1">//ok,replace T with double
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">myFunction</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mf">8.4</span><span class="p">);</span><span class="c1">//error,no matching function for call to &#39;myFunction(int,double)&#39;
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="函数模板示例map">函数模板示例：Map</h3>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="p">,</span><span class="k">class</span> <span class="nc">Pred</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Map</span><span class="p">(</span><span class="n">T</span> <span class="n">s</span><span class="p">,</span><span class="n">T</span> <span class="n">e</span><span class="p">,</span><span class="n">T</span> <span class="n">x</span><span class="p">,</span><span class="n">Pred</span> <span class="n">op</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">(;</span><span class="n">s</span><span class="o">!=</span><span class="n">e</span><span class="p">;</span><span class="o">++</span><span class="n">s</span><span class="p">,</span><span class="o">++</span><span class="n">x</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="o">*</span><span class="n">x</span><span class="o">=</span><span class="n">op</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">Cube</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">){</span><span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl"><span class="kt">double</span> <span class="nf">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">){</span><span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">},</span><span class="n">b</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="kt">double</span> <span class="n">d</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mf">1.1</span><span class="p">,</span><span class="mf">2.1</span><span class="p">,</span><span class="mf">3.1</span><span class="p">,</span><span class="mf">4.1</span><span class="p">,</span><span class="mf">5.1</span><span class="p">},</span><span class="n">c</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">Map</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">Square</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">Map</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">Cube</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">Map</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">d</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">Square</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>输出以下内容</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1,4,9,16,25,
</span></span><span class="line"><span class="cl">1,8,27,64,125,
</span></span><span class="line"><span class="cl">1.21,4.41,9.61,16.81,26.01,</span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>程序运行分析</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="p">,</span><span class="k">class</span> <span class="nc">Pred</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Map</span><span class="p">(</span><span class="n">T</span> <span class="n">s</span><span class="p">,</span><span class="n">T</span> <span class="n">e</span><span class="p">,</span><span class="n">T</span> <span class="n">x</span><span class="p">,</span><span class="n">Pred</span> <span class="n">op</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">(;</span><span class="n">s</span><span class="o">!=</span><span class="n">e</span><span class="p">;</span><span class="o">++</span><span class="n">s</span><span class="p">,</span><span class="o">++</span><span class="n">x</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="o">*</span><span class="n">x</span><span class="o">=</span><span class="n">op</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">},</span><span class="n">b</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="n">Map</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">Square</span><span class="p">);</span><span class="c1">//实例化出以下函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">Map</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span> <span class="n">s</span><span class="p">,</span><span class="kt">int</span><span class="o">*</span> <span class="n">e</span><span class="p">,</span><span class="kt">int</span><span class="o">*</span> <span class="n">x</span><span class="p">,</span><span class="kt">double</span> <span class="p">(</span><span class="o">*</span><span class="n">op</span><span class="p">)(</span><span class="kt">double</span><span class="p">)){</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">(;</span><span class="n">s</span><span class="o">!=</span><span class="n">e</span><span class="p">;</span><span class="o">++</span><span class="n">s</span><span class="p">,</span><span class="o">++</span><span class="n">x</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="o">*</span><span class="n">x</span><span class="o">=</span><span class="n">op</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
    </div>

    
<nav class="post-navigation">
    
    <a href="/posts/c&#43;&#43;6/" class="prev">
        &laquo; 面向对象的程序设计学习笔记 6
    </a>
    
    
    
</nav>


</article>


<aside class="hover-toc">
    <div class="hover-toc-indicator"></div>
    <div class="hover-toc-panel">
        <h4>In this article</h4>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#1输入输出流相关的类">1.输入输出流相关的类</a>
      <ul>
        <li><a href="#与输入输出流操作相关的类">与输入输出流操作相关的类</a></li>
        <li><a href="#标准流对象">标准流对象</a></li>
        <li><a href="#输出和输入的重定向">输出和输入的重定向</a></li>
        <li><a href="#判断输入流结束">判断输入流结束</a></li>
        <li><a href="#istream-类的成员函数">istream 类的成员函数</a></li>
      </ul>
    </li>
    <li><a href="#2流操纵算子">2.流操纵算子</a>
      <ul>
        <li><a href="#整数流的基数流操纵算子-decocthexsetbase">整数流的基数：流操纵算子 <code>dec</code>，<code>oct</code>，<code>hex</code>，<code>setbase</code></a></li>
        <li><a href="#浮点数的精度-precisionsetprecision">浮点数的精度 <code>precision</code>，<code>setprecision</code></a></li>
        <li><a href="#设置域宽-setwwidth">设置域宽 <code>setw</code>，<code>width</code></a></li>
        <li><a href="#用户自定义的流操纵算子">用户自定义的流操纵算子</a></li>
      </ul>
    </li>
    <li><a href="#3文件读写">3.文件读写</a>
      <ul>
        <li><a href="#文件和流">文件和流</a></li>
        <li><a href="#创建文件">创建文件</a></li>
        <li><a href="#文章的读写指针">文章的读写指针</a></li>
        <li><a href="#字符文件读写">字符文件读写</a></li>
        <li><a href="#二进制文件读写">二进制文件读写</a></li>
        <li><a href="#文件拷贝程序-mycopy-实例">文件拷贝程序 mycopy 实例</a></li>
        <li><a href="#二进制文件和文本文件的区别">二进制文件和文本文件的区别</a></li>
      </ul>
    </li>
    <li><a href="#4函数模板">4.函数模板</a>
      <ul>
        <li><a href="#函数模板">函数模板</a></li>
        <li><a href="#不通过参数实例化函数模板">不通过参数实例化函数模板</a></li>
        <li><a href="#函数模板的重载">函数模板的重载</a></li>
        <li><a href="#函数模板和函数的次序">函数模板和函数的次序</a></li>
        <li><a href="#函数模板示例map">函数模板示例：Map</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</aside>


        </main>
        <footer class="site-footer">
    <div class="container">
        <p>&copy; 2025 Kibrac. All rights reserved.</p>
    </div>
</footer>

    </div>
    <a id="back-to-top" href="#" title="返回顶部">&uarr;</a>
    <script src="/js/theme-switcher.js"></script>
    <script src="/js/main.js"></script>
</body>
</html>
