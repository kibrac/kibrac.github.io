<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
<script>
  
  
  (function() {
    const theme = localStorage.getItem('theme');
    if (theme === 'dark') {
      document.documentElement.setAttribute('data-theme', 'dark');
    } else if (theme === 'light') {
      document.documentElement.setAttribute('data-theme', 'light');
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
  })();
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>面向对象的程序设计学习笔记 3 | Kibrac&#39;s Blog</title>
<link rel="icon" type="image/png" href="/images/favicon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&family=Montserrat:wght@400;700&family=JetBrains+Mono&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="/css/syntax.css">
<link rel="stylesheet" href="/css/style.css">

</head>
<body class="kind-page section-posts">
    <div id="content">
        <header class="site-header">
    <div class="container">
        <h1><a href="https://kibrac.github.io/">Kibrac&#39;s Blog</a></h1>
        <div class="header-right">
            <nav id="site-nav" class="site-nav">
                <ul>
                    
                    
                        
                        
                        
                        <li class="">
                            <a href="/">Home</a>
                        </li>
                    
                        
                        
                        
                        <li class="active">
                            <a href="/posts/">Posts</a>
                        </li>
                    
                        
                        
                        
                        <li class="">
                            <a href="/archive/">Archive</a>
                        </li>
                    
                        
                        
                        
                        <li class="">
                            <a href="/tags/">Tags</a>
                        </li>
                    
                </ul>
            </nav>
            <button id="theme-toggle" title="切换暗黑模式"></button>
            <button id="menu-toggle" class="menu-toggle" aria-label="Toggle Menu">
                <span class="hamburger"></span>
            </button>
        </div>
    </div>
</header>
        <main class="main-content">
            
<article class="post-single">
    <header class="page-header">
        <h1>面向对象的程序设计学习笔记 3</h1>
        
            <p class="page-content">第三章 类和对象提高</p>
        
        <div class="post-meta">
            <span>July 31, 2025</span>
            <span class="dot">&middot;</span>
            <span>6 min read</span>
            
                <span class="dot">&middot;</span>
                <div class="tags-inline">
                    
                        <a href="/tags/c&#43;&#43;">C&#43;&#43;</a>
                    
                        <a href="/tags/%E7%AC%94%E8%AE%B0">笔记</a>
                    
                </div>
            
        </div>
    </header>

    <div class="post-content">
        <p>课程链接：<a href="https://www.icourse163.org/course/PKU-1002029030">程序设计与算法（三）C++面向对象程序设计_北京大学_中国大学MOOC(慕课)</a></p>
<h2 id="1this-指针">1.this 指针</h2>
<h3 id="c-到-c-的翻译">C++ 到 C 的翻译</h3>
<p>以下为一段 C++ 程序</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CCar</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">int</span> <span class="n">price</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="nf">SetPrice</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">CCar</span><span class="o">::</span><span class="n">SetPrice</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">price</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">CCar</span> <span class="n">car</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">car</span><span class="p">.</span><span class="n">SetPrice</span><span class="p">(</span><span class="mi">20000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>翻译为 C 程序如下</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">c</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">CCar</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">price</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">SetPrice</span><span class="p">(</span><span class="k">struct</span> <span class="n">CCar</span><span class="o">*</span> <span class="n">this</span><span class="p">,</span><span class="kt">int</span> <span class="n">p</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">this</span><span class="o">-&gt;</span><span class="n">price</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">struct</span> <span class="n">CCar</span> <span class="n">car</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="nf">SetPrice</span><span class="p">(</span><span class="o">&amp;</span><span class="n">car</span><span class="p">,</span><span class="mi">20000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><ul>
<li>this 指针的作用就是<strong>指向成员函数所作用的对象</strong></li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Complex</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">double</span> <span class="n">real</span><span class="p">,</span><span class="n">imag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="nf">Print</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">			<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">real</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">imag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">Complex</span><span class="p">(</span><span class="kt">double</span> <span class="n">r</span><span class="p">,</span><span class="kt">double</span> <span class="n">i</span><span class="p">)</span><span class="o">:</span><span class="n">real</span><span class="p">(</span><span class="n">r</span><span class="p">),</span><span class="n">imag</span><span class="p">(</span><span class="n">i</span><span class="p">){}</span>
</span></span><span class="line"><span class="cl">		<span class="n">Complex</span> <span class="nf">AddOne</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">			<span class="k">this</span><span class="o">-&gt;</span><span class="n">real</span><span class="o">++</span><span class="p">;</span><span class="c1">//等价于real++
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="k">this</span><span class="o">-&gt;</span><span class="n">Print</span><span class="p">();</span><span class="c1">//等价于Print
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="k">return</span><span class="o">*</span> <span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">Complex</span> <span class="n">c1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">c2</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">c2</span><span class="o">=</span><span class="n">c1</span><span class="p">.</span><span class="n">AddOne</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">//输出:2,1
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><ul>
<li><strong>非静态</strong>成员函数中可以直接使用 this 来代表指向该函数作用的对象的指针</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">A</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="n">Hello</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">			<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;hello&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">A</span><span class="o">*</span> <span class="n">p</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">p</span><span class="o">-&gt;</span><span class="n">Hello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span><span class="c1">//正常输出：hello 
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>以上代码如果进行下面的修改就是错误的</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">A</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="n">Hello</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">			<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;hello&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span><span class="c1">//错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">A</span><span class="o">*</span> <span class="n">p</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">p</span><span class="o">-&gt;</span><span class="n">Hello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><ul>
<li><strong>静态成员函数中不能使用 this 指针！</strong> 因为静态成员函数并不具体作用于某个对象，因此静态成员函数的真实的参数的个数，就是程序中写出的参数个数。</li>
</ul>
<h2 id="2静态成员变量">2.静态成员变量</h2>
<h3 id="基本概念">基本概念</h3>
<p><strong>静态成员</strong>：在说明前面加了 <code>static</code> 关键字的成员。</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CRectangle</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">int</span> <span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">static</span> <span class="kt">int</span> <span class="n">nTotalArea</span><span class="p">;</span><span class="c1">//静态成员变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">static</span> <span class="kt">int</span> <span class="n">nTotalNumber</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">CRectangle</span><span class="p">(</span><span class="kt">int</span> <span class="n">w_</span><span class="p">,</span><span class="kt">int</span> <span class="n">h_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="o">~</span><span class="n">CRectangle</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="k">static</span> <span class="kt">void</span> <span class="nf">PrintTotal</span><span class="p">();</span><span class="c1">//静态成员函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><ul>
<li>普通成员变量每个对象有各自的一份，而静态成员变量一共就一份，<strong>为所有对象共享</strong>。</li>
<li><code>sizeof</code> 运算符不会计算静态成员变量。</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CMyclass</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">static</span> <span class="kt">int</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span><span class="c1">//则sizeof(CMyclass)等于4
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><ul>
<li>普通成员函数必须具体作用于某个对象，而静态成员函数<strong>并不具体作用于某个对象</strong>。</li>
<li>因此静态成员不需要通过对象就能访问。</li>
</ul>
<h3 id="如何访问静态成员">如何访问静态成员</h3>
<ol>
<li>类名:: 成员名
<code>CRectangle::PrintTotal();</code></li>
<li>对象名.成员名
<code>CRectangle r;r.PrintTotal();</code></li>
<li>指针 -&gt;成员名
<code>CRectangle* p=&amp;r;p-&gt;PrintTotal();</code></li>
<li>引用.成员名
<code>CRectangle&amp; ref=r;int n=ref.nTotalNumber;</code></li>
</ol>
<ul>
<li><strong>静态成员变量本质上是全局变量，哪怕一个对象都不存在，类的静态成员变量也存在。</strong></li>
<li>静态成员函数本质上是全局函数。</li>
<li>设置静态成员这种机制的目的是将和某些类紧密相关的全局变量和函数写到类里面，看上去像一个整体，易于维护和理解。</li>
</ul>
<blockquote>
<p>考虑一个需要随时知道矩形总数和总面积的图形处理程序</p>
<p>可以用全局变量来记录总数和总面积</p>
<p>用静态成员将这两个变量封装进类中，就更容易理解和维护</p></blockquote>
<p>仍然使用之前的例子</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//定义类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">CRectangle</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">int</span> <span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">static</span> <span class="kt">int</span> <span class="n">nTotalArea</span><span class="p">;</span><span class="c1">//静态成员变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">static</span> <span class="kt">int</span> <span class="n">nTotalNumber</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">CRectangle</span><span class="p">(</span><span class="kt">int</span> <span class="n">w_</span><span class="p">,</span><span class="kt">int</span> <span class="n">h_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="o">~</span><span class="n">CRectangle</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="k">static</span> <span class="kt">void</span> <span class="nf">PrintTotal</span><span class="p">();</span><span class="c1">//静态成员函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//利用构造函数和析构函数达到计数的效果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">CRectangle</span><span class="o">::</span><span class="n">CRectangle</span><span class="p">(</span><span class="kt">int</span> <span class="n">w_</span><span class="p">,</span><span class="kt">int</span> <span class="n">h_</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">w</span><span class="o">=</span><span class="n">w_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">h</span><span class="o">=</span><span class="n">h_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">nTotalNumber</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">nTotalArea</span><span class="o">+=</span><span class="n">w</span><span class="o">*</span><span class="n">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">CRectangle</span><span class="o">::~</span><span class="n">CRectangle</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">nTotalNumber</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">nTotalArea</span><span class="o">-=</span><span class="n">w</span><span class="o">*</span><span class="n">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">CRectangle</span><span class="o">::</span><span class="n">PrintTotal</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">nTotalNumber</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">nTotalArea</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//必须在定义类的文件中对静态成员进行一次说明或初始化
</span></span></span><span class="line"><span class="cl"><span class="c1">//否则编译能通过，链接不能通过
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">CRectangle</span><span class="o">::</span><span class="n">nTotalNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">CRectangle</span><span class="o">::</span><span class="n">nTotalArea</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">CRectangle</span> <span class="n">r1</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="n">r2</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//cout &lt;&lt; CRectangle::nTotalNumber;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//[Error] &#39;int CRectangle::nTotalNumber&#39; is private
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">CRectangle</span><span class="o">::</span><span class="n">PrintTotal</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">r1</span><span class="p">.</span><span class="n">PrintTotal</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>输出内容为</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">2,13
</span></span><span class="line"><span class="cl">2,13</span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>**注意：**在静态成员函数中，不能访问非静态成员变量，也不能调用非静态成员函数。</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">CRectangle</span><span class="o">::</span><span class="n">PrintTotal</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">w</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">nTotalNumber</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">nTotalArea</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//wrong，解释不通w到底是属于哪个对象的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>事实上，之前例子中的 <code>CRectangle</code> 类的写法是有严重缺陷的，这是因为</p>
<ul>
<li>在使用 <code>CRectangle</code> 类时，有时会调用复制构造函数生成临时的隐藏的 <code>CRectangle</code> 对象，这些对象在生成时并不会使用自定义的构造函数，而是使用编译器自动生成的复制构造函数。这里的有时指的是
<ul>
<li>调用一个以 <code>CRectangle</code> 类对象作为参数的函数时</li>
<li>调用一个以 <code>CRectangle</code> 类对象作为返回值的函数时</li>
</ul>
</li>
<li>临时对象在消亡时会调用析构函数，减少 <code>nTotalNumber</code> 和 <code>nTotalArea</code> 的值，可是这些临时对象在生成时却没有增加 <code>nTotalNumber</code> 和 <code>nTotalArea</code> 的值。</li>
<li>解决办法：为 <code>CRectangle</code> 类写一个复制构造函数。</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">CRectangle</span><span class="o">::</span><span class="n">CRectangle</span><span class="p">(</span><span class="n">CRectangle</span><span class="o">&amp;</span> <span class="n">r</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">w</span><span class="o">=</span><span class="n">r</span><span class="p">.</span><span class="n">w</span><span class="p">;</span><span class="n">h</span><span class="o">=</span><span class="n">r</span><span class="p">.</span><span class="n">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">nTotalNumber</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">nTotalArea</span><span class="o">+=</span><span class="n">w</span><span class="o">*</span><span class="n">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><h2 id="3成员对象和封闭类">3.成员对象和封闭类</h2>
<h3 id="什么是封闭类">什么是封闭类</h3>
<ul>
<li>有成员对象的类称为封闭（enclosing）类
<ul>
<li>什么是成员对象？</li>
<li>在 C++ 中，​<strong>​成员对象​</strong>​（Member Object）是指一个类的成员变量是另一个类的对象。</li>
</ul>
</li>
</ul>
<p>举例如下</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CTyre</span><span class="p">{</span><span class="c1">//轮胎类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">int</span> <span class="n">radius</span><span class="p">;</span><span class="c1">//半径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="kt">int</span> <span class="n">width</span><span class="p">;</span><span class="c1">//宽度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">CTyre</span><span class="p">(</span><span class="kt">int</span> <span class="n">r</span><span class="p">,</span><span class="kt">int</span> <span class="n">w</span><span class="p">)</span><span class="o">:</span><span class="n">radius</span><span class="p">(</span><span class="n">r</span><span class="p">),</span><span class="n">width</span><span class="p">(</span><span class="n">w</span><span class="p">){}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CEngine</span><span class="p">{};</span><span class="c1">//引擎类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CCar</span><span class="p">{</span><span class="c1">//汽车类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">		<span class="kt">int</span> <span class="n">price</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">CTyre</span> <span class="n">tyre</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">CEngine</span> <span class="n">engine</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">CCar</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="p">,</span><span class="kt">int</span> <span class="n">tr</span><span class="p">,</span><span class="kt">int</span> <span class="n">tw</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">CCar</span><span class="o">::</span><span class="n">CCar</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="p">,</span><span class="kt">int</span> <span class="n">tr</span><span class="p">,</span><span class="kt">int</span> <span class="n">w</span><span class="p">)</span><span class="o">:</span><span class="n">price</span><span class="p">(</span><span class="n">p</span><span class="p">),</span><span class="n">tyre</span><span class="p">(</span><span class="n">tr</span><span class="p">,</span><span class="n">w</span><span class="p">){}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">CCar</span> <span class="n">car</span><span class="p">(</span><span class="mi">20000</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">225</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>上例中，如果 <code>CCar</code> 类不定义构造函数，则下面的语句会编译出错：</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">CCar</span> <span class="n">car</span><span class="p">;</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>因为编译器不明白 <code>car.tyre</code> 该如何初始化。<code>car.engine</code> 的初始化没问题，用默认构造函数即可。</p>
<p><strong>任何生成封闭类对象的语句，都要让编译器明白，对象中的成员对象，是如何初始化的。</strong></p>
<p>具体的做法就是：<strong>通过封闭类的构造函数的初始化列表。</strong></p>
<p>成员对象初始化列表中的参数可以是任意复杂的表达式，可以包括函数，变量，只要表达式中的函数或变量有定义就行。</p>
<h3 id="封闭类构造函数和析构函数的执行顺序">封闭类构造函数和析构函数的执行顺序</h3>
<ul>
<li>封闭类对象生成时，先执行所有对象成员的构造函数，然后才执行封闭类的构造函数。</li>
<li>对象成员的构造函数调用次序和对象成员在类中的说明次序一致，与它们在成员初始化列表中出现的次序无关。</li>
<li>当封闭类的对象消亡时，先执行封闭类的析构函数，然后再执行成员对象的析构函数。次序和构造函数的调用次序相反。</li>
</ul>
<h3 id="封闭类实例">封闭类实例</h3>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CTyre</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">CTyre</span><span class="p">(){</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;CTyre constructor&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">		<span class="o">~</span><span class="n">CTyre</span><span class="p">(){</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;CTyre destructor&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CEngine</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">CEngine</span><span class="p">(){</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;CEngine constructor&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">		<span class="o">~</span><span class="n">CEngine</span><span class="p">(){</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;CEngine destructor&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CCar</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">CEngine</span> <span class="n">engine</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">CTyre</span> <span class="n">tyre</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">CCar</span><span class="p">(){</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;CCar constructor&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">		<span class="o">~</span><span class="n">CCar</span><span class="p">(){</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;CCar destructor&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">CCar</span> <span class="n">car</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>输出内容如下</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">CEngine</span> <span class="n">constructor</span>
</span></span><span class="line"><span class="cl"><span class="n">CTyre</span> <span class="n">constructor</span>
</span></span><span class="line"><span class="cl"><span class="n">CCar</span> <span class="n">constructor</span>
</span></span><span class="line"><span class="cl"><span class="n">CCar</span> <span class="n">destructor</span>
</span></span><span class="line"><span class="cl"><span class="n">CTyre</span> <span class="n">destructor</span>
</span></span><span class="line"><span class="cl"><span class="n">CEngine</span> <span class="n">destructor</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="封闭类的复制构造函数">封闭类的复制构造函数</h3>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">A</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">A</span><span class="p">(){</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;default&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">		<span class="n">A</span><span class="p">(</span><span class="n">A</span><span class="o">&amp;</span><span class="n">a</span><span class="p">){</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;copy&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">B</span><span class="p">{</span><span class="n">A</span> <span class="n">a</span><span class="p">;};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">B</span> <span class="n">b1</span><span class="p">,</span><span class="n">b2</span><span class="p">(</span><span class="n">b1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>输出如下</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">text</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">default
</span></span><span class="line"><span class="cl">copy</span></span></code></pre></td></tr></table>
</div>
</div>
</div><p>以上输出说明 <code>b2.a</code> 是用类 A 的复制构造函数初始化的。而且调用复制构造函数时的实参就是 <code>b1.a</code>。</p>
<h2 id="4常量对象常量成员函数和常引用">4.常量对象、常量成员函数和常引用</h2>
<h3 id="常量对象">常量对象</h3>
<ul>
<li>如果不希望某个对象的值被改变，则定义该对象的时候可以在前面加 <code>const</code> 关键字。</li>
</ul>
<h3 id="常量成员函数">常量成员函数</h3>
<ul>
<li>在类的成员函数说明后面可以加 <code>const</code> 关键字，则该成员函数成为常量成员函数。</li>
<li>常量成员函数执行期间<strong>不应修改其作用的对象</strong>。因此，在常量成员函数中不能修改成员变量的值（<strong>静态成员变量除外</strong>），也不能调用同类的非常量成员函数（<strong>静态成员函数除外</strong>）。</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Sample</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="nf">GetValue</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="nf">func</span><span class="p">(){};</span>
</span></span><span class="line"><span class="cl">		<span class="n">Sample</span><span class="p">(){}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Sample</span><span class="o">::</span><span class="n">GetValue</span><span class="p">()</span> <span class="k">const</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="c1">//wrong
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">func</span><span class="p">();</span><span class="c1">//wrong
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="n">Sample</span> <span class="n">o</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">o</span><span class="p">.</span><span class="n">value</span><span class="o">=</span><span class="mi">100</span><span class="p">;</span><span class="c1">//error，常量对象不可被修改
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">o</span><span class="p">.</span><span class="n">func</span><span class="p">();</span><span class="c1">//error，常量对象上面不能执行非常量成员函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">o</span><span class="p">.</span><span class="n">GetValue</span><span class="p">();</span><span class="c1">//ok，常量对象上可以执行常量成员函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span><span class="c1">//在Dev C++中，要为Sample类编写无参构造函数才可以，Visual Studio 2010中不需要
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><h3 id="常量成员函数的重载">常量成员函数的重载</h3>
<ul>
<li>两个成员函数，名字和参数表都一样，但是一个是 <code>const</code>，一个不是，算重载。</li>
</ul>
<h3 id="常引用">常引用</h3>
<ul>
<li>引用前面可以加 <code>const</code> 关键字，成为常引用。不能通过常引用，修改其引用的变量。</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">int</span><span class="o">&amp;</span> <span class="n">r</span><span class="o">=</span><span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">r</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span><span class="c1">//error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">;</span><span class="c1">//ok
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><blockquote>
<p>对象作为函数的参数时，生成该参数需要调用复制构造函数，效率比较低。用指针作参数，代码又不好看，如何解决？</p>
<p>可以用对象的<strong>引用</strong>作为参数。但是随之而来的问题是若函数中不小心修改了形参，则实参也跟着变，这又如何避免？</p>
<p>可以用对象的<strong>常引用</strong>作为参数。</p></blockquote>
<h2 id="5友元">5.友元</h2>
<p>友元分为<strong>友元函数</strong>和<strong>友元类</strong>两种。</p>
<ol>
<li>友元函数：一个类的友元函数可以访问该类的私有成员。</li>
</ol>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CCar</span><span class="p">;</span><span class="c1">//提前声明CCar类，以便后面的CDriver类使用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CDriver</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="n">ModifyCar</span><span class="p">(</span><span class="n">CCar</span><span class="o">*</span> <span class="n">pCar</span><span class="p">);</span><span class="c1">//改装汽车
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CCar</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">int</span> <span class="n">price</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">friend</span> <span class="kt">int</span> <span class="nf">MostExpensiveCar</span><span class="p">(</span><span class="n">CCar</span> <span class="n">cars</span><span class="p">[],</span><span class="kt">int</span> <span class="n">total</span><span class="p">);</span><span class="c1">//声明友元
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">friend</span> <span class="kt">void</span> <span class="n">CDriver</span><span class="o">::</span><span class="n">ModifyCar</span><span class="p">(</span><span class="n">CCar</span><span class="o">*</span> <span class="n">pCar</span><span class="p">);</span><span class="c1">//声明友元
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">CDriver</span><span class="o">::</span><span class="n">ModifyCar</span><span class="p">(</span><span class="n">CCar</span><span class="o">*</span> <span class="n">pCar</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">pCar</span><span class="o">-&gt;</span><span class="n">price</span><span class="o">+=</span><span class="mi">1000</span><span class="p">;</span><span class="c1">//汽车改装后价值增加
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">MostExpensiveCar</span><span class="p">(</span><span class="n">CCar</span> <span class="n">cars</span><span class="p">[],</span><span class="kt">int</span> <span class="n">total</span><span class="p">){</span><span class="c1">//求最贵汽车的价格
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">int</span> <span class="n">tmpMax</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">total</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span><span class="p">(</span><span class="n">cars</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">price</span><span class="o">&gt;</span><span class="n">tmpMax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tmpMax</span><span class="o">=</span><span class="n">cars</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">price</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">tmpMax</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span><span class="k">return</span> <span class="mi">0</span><span class="p">;}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><ul>
<li>可以把一个类的成员函数（包括构造、析构函数）说明为另一个类的友元。</li>
</ul>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">B</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="n">function</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">A</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">friend</span> <span class="kt">void</span> <span class="n">B</span><span class="o">::</span><span class="n">function</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><ol start="2">
<li>友元类：如果 A 是 B 的友元类，那么 A 的成员函数可以访问 B 的私有成员。</li>
</ol>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="language-name">cpp</span>
        <button class="copy-code-button" aria-label="Copy code to clipboard">
            <i class="fa-regular fa-copy"></i>
            <span class="copy-text">Copy</span>
            <span class="copied-text" style="display: none;">Copied!</span>
        </button>
    </div>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CCar</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">int</span> <span class="n">price</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">friend</span> <span class="k">class</span> <span class="nc">CDriver</span><span class="p">;</span><span class="c1">//声明CDriver为友元类 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CDriver</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">CCar</span> <span class="n">myCar</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">ModifyCar</span><span class="p">(){</span><span class="c1">//改装汽车 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">myCar</span><span class="p">.</span><span class="n">price</span><span class="o">+=</span><span class="mi">1000</span><span class="p">;</span><span class="c1">//因CDriver是CCar的友元类，姑此处可以访问其私有成员 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span><span class="k">return</span> <span class="mi">0</span><span class="p">;}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div><p><strong>友元类之间的关系不能传递，不能继承。</strong></p>

    </div>

    
<nav class="post-navigation">
    
    <a href="/posts/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2/" class="prev">
        &laquo; 面向对象的程序设计学习笔记 2
    </a>
    
    
    
    <a href="/posts/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4/" class="next">
        面向对象的程序设计学习笔记 4 &raquo;
    </a>
    
</nav>


</article>


<aside class="hover-toc">
    <div class="hover-toc-indicator"></div>
    <div class="hover-toc-panel">
        <h4>In this article</h4>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#1this-指针">1.this 指针</a>
      <ul>
        <li><a href="#c-到-c-的翻译">C++ 到 C 的翻译</a></li>
      </ul>
    </li>
    <li><a href="#2静态成员变量">2.静态成员变量</a>
      <ul>
        <li><a href="#基本概念">基本概念</a></li>
        <li><a href="#如何访问静态成员">如何访问静态成员</a></li>
      </ul>
    </li>
    <li><a href="#3成员对象和封闭类">3.成员对象和封闭类</a>
      <ul>
        <li><a href="#什么是封闭类">什么是封闭类</a></li>
        <li><a href="#封闭类构造函数和析构函数的执行顺序">封闭类构造函数和析构函数的执行顺序</a></li>
        <li><a href="#封闭类实例">封闭类实例</a></li>
        <li><a href="#封闭类的复制构造函数">封闭类的复制构造函数</a></li>
      </ul>
    </li>
    <li><a href="#4常量对象常量成员函数和常引用">4.常量对象、常量成员函数和常引用</a>
      <ul>
        <li><a href="#常量对象">常量对象</a></li>
        <li><a href="#常量成员函数">常量成员函数</a></li>
        <li><a href="#常量成员函数的重载">常量成员函数的重载</a></li>
        <li><a href="#常引用">常引用</a></li>
      </ul>
    </li>
    <li><a href="#5友元">5.友元</a></li>
  </ul>
</nav>
    </div>
</aside>


        </main>
        <footer class="site-footer">
    <div class="container">
        <p>&copy; 2025 Kibrac. All rights reserved.</p>
    </div>
</footer>

    </div>
    <a id="back-to-top" href="#" title="返回顶部">&uarr;</a>
    <script src="/js/theme-switcher.js"></script>
    <script src="/js/main.js"></script>
</body>
</html>
